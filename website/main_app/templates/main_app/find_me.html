<!DOCTYPE html>
{% extends "main_app/common.html" %}
{% load static %}

<html lang="en">
    {% block content %}

    <script src="https://apis.mapmyindia.com/advancedmaps/v1/oehzgx54nik3ur7upodu32splbu6gxw5/map_load?v=1.5"></script>
    <style>
        #map {	margin: 0;	padding: 0;width: 1200px;height: 1000px;}
        #map {
            margin:10px;
        }
    </style>


    <h5><strong>Click the button to get your coordinates.</strong></h5>

    <button class="btn btn-outline-info" id="find-me" onclick="getLocation()">My Location</button>

    <p id="demo"></p>

    <div id="map"></div>

    <script>
        var x = document.getElementById("demo");

        var lat = 30;
        var long = 78;
        var icon = L.divIcon({
             className: 'my-div-icon',
             html: "<img class='map_marker'  src=" + "'https://maps.mapmyindia.com/images/2.png'>" ,
             iconSize: [10, 10],
             popupAnchor: [12, -10]
        });/*function that creates a div over a icon and display content on the div*/
        var title = "Your Location!";

        function showPosition(position) {
            x.innerHTML="<hr>Your Latitude: " + position.coords.latitude +
            "<br>Your Longitude: " + position.coords.longitude;
            lat = position.coords.latitude;
            long = position.coords.longitude;
            var map=new MapmyIndia.Map("map",{ center:[lat, long], zoomControl: true, hybrid:true, search:true, location:true});
            var position = new L.LatLng(lat, long);/*The WGS location object*/
            var mk = new L.Marker(position, {icon: icon, title: title});/*marker with a custom icon */
            mk.bindPopup(title);
            map.addLayer(mk);
        }

        function getLocation() {
          if (navigator.geolocation) {
            navigator.geolocation.watchPosition(showPosition);
          } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
          }
        }


    </script>

    {% endblock %}



</html>