<!DOCTYPE html>
{% load static %}
<html lang="en">
    <head>

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script type = "text/javascript" src = "https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script src = "https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

            <link rel="icon" href="http://mapmyindia.com/images/favicon.ico" type="image/x-icon">
            <style type="text/css">
                 #map {
                    left: 2px; top: 1px;
                    right: 2px; bottom: 2px;
                    border: 1px solid #cccccc;
                    margin-top:20px;
                    margin-right:20px;
                    height:1000px;
                    width:1540px;
                    }
                #result {
                    left: 2px; top: 46px;
                    width: 306px;
                    bottom: 2px;
                    border: 1px solid #cccccc;
                    background-color: #FAFAFA;
                    overflow: auto;
                    margin-top:20px;
                    margin-right:20px;
                    height:1000px;
                    width:310px;
                    }
                 button{width: 220px;font-family:Verdana,sans-serif, Arial;font-size:12px;padding:2px 0;color:#333}
            </style>
            <link rel="stylesheet" href="css/leaflet.css" />
            <!--put your map api javascript url with key here-->
            <script src="https://apis.mapmyindia.com/advancedmaps/v1/oehzgx54nik3ur7upodu32splbu6gxw5/map_load?v=1.5"></script>

    </head>

    <body>

        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
          <a class="navbar-brand" href="/home">Suraksha: Empowering Women</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav mr-auto">

               <!-- Dropdown Trigger -->
              <li class="nav-item">
                  <a class='dropdown-trigger nav-link' href='#' data-target='dropdown1'>Find </a>
              </li>
              <!-- Dropdown Structure -->
              <ul id='dropdown1' class='dropdown-content'>
                <li><a href="/corona_updates">Corona Updates</a></li>
                <li><a href="/city_map">Find in city</a></li>
                <li class="divider" tabindex="-1"></li>
                <li><a href="/find_me">Find Me!</a></li>
                <li><a href="#!"><i class="material-icons">view_module</i>four</a></li>
                <li><a href="#!"><i class="material-icons">cloud</i>five</a></li>
              </ul>
              <script>
                  $('.dropdown-trigger').dropdown();
              </script>

              <li class="nav-item">
                <a class="nav-link" href="/women_rights">Women Rights <span class="sr-only">(current)</span></a>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="/news">Quick Glance<span class="sr-only">(current)</span></a>
              </li>


              {% if user.is_authenticated %}
                  <li class="nav-item">
                    <a class="nav-link" href="/account">{{user.username}}</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="/logout">Logout</a>
                  </li>
              {% else %}
                  <li class="nav-item">
                    <a class="nav-link" href="/register">Register</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="/login">Login</a>
                  </li>
              {% endif %}

              <li class="nav-item">
                <a class="nav-link" href="/emergency_contact">Emergency Contacts</a>
              </li>

            </ul>
            <a class="nav-link" href="/emergency"><button class="btn danger" formmethod="POST">EMERGENCY !!</button></a>

          </div>
        </nav>

        {% if messages %}
            {% for message in messages %}
                <script>M.toast({html: "{{message}}", classes: 'blue rounded',
                displayLength:4000});</script>
            {% endfor %}
        {% endif %}


            <br>
            <script>
                var map = null;
                window.onload = function() {

                    var centre = new L.LatLng(30.7333, 76.7794);
                    map=new MapmyIndia.Map('map',{center:centre,zoomControl: true,hybrid:true });
                        /*1.create a MapmyIndia Map by simply calling new MapmyIndia.Map() and passsing it at the minimum div object, all others are optional...
                        2.all leaflet mapping functions can be called simply on the L object
                        3.MapmyIndia may extend and in future modify the customised/forked Leaflet object to enhance mapping functionality for developers, which will be clearly documented in the MapmyIndia API documentation section.*/

                    var event_div = document.getElementById("event-log");
                    /***map-events****/
                    map.on("dblclick", function(e) {
                        var pt = e.latlng;/*event returns lat lng of clicked point*/
                       event_div.innerHTML= "dbclick:</br> lat:" + pt.lat + "</br>lng:" + pt.lng + "</br>" + event_div.innerHTML;
                    });
                    map.on("click", function(e) {
                        var pt = e.latlng;/*event returns lat lng of clicked point*/
                       event_div.innerHTML= "click:</br> lat:" + pt.lat + "</br>lng:" + pt.lng + "</br>" + event_div.innerHTML;
                    });
                    map.on("resize", function(e) {
                        event_div.innerHTML="map resized</br>" + event_div.innerHTML;
                    });
                    map.on("mouseup", function(e) {
                        var pt = e.latlng;/*event returns lat lng of current point*/
                        event_div.innerHTML = "mouseup:</br> lat:" + pt.lat + "</br>lng:" + pt.lng + "</br>" + event_div.innerHTML;
                    });
                    map.on("mousedown", function(e) {
                        var pt = e.latlng;/*event returns lat lng of current point*/
                        event_div.innerHTML = "mousedown:</br> lat:" + pt.lat + "</br>lng:" + pt.lng + "</br>" + event_div.innerHTML;
                    });
                };

                function mapmyindia_current_zoom_level() {
                    var zoom = map.getZoom();/*returns the current zoom level*/
                    var event_div = document.getElementById("event-log");
                    event_div.innerHTML='';
                    event_div.innerHTML= "Current zoom level:" + zoom + "</br>"+event_div.innerHTML;
                }
                function mapmyindia_current_center_location() {
                    var pt = map.getCenter();/*returns the center of map*/
                    var event_div = document.getElementById("event-log");
                    event_div.innerHTML='';
                    event_div.innerHTML= "Current Center:</br> lat:" + pt.lat + "</br>lng:" + pt.lng + "</br>"+event_div.innerHTML;
                }
                function mapmyindia_current_bound() {
                    var bounds = map.getBounds();/*Returns the rectangle in WGS coordinates that is currently displayed in the containing HTML element i.e Map.*/
                    var event_div = document.getElementById("event-log");
                    event_div.innerHTML='';
                    event_div.innerHTML= "current bound:</br> north east lat:" + bounds.getNorthEast().lat + "</br> north east lng:" + bounds.getNorthEast().lng + "</br>south west lat:" + bounds.getSouthWest().lat + "</br>south west lng:" + bounds.getSouthWest().lng + "</br>"+event_div.innerHTML;
                }
                function mapmyindia_map_pan() {
                   var pt=new L.LatLng(30.7333, 76.7794);
                   var event_div = document.getElementById("event-log");
                   event_div.innerHTML='';
                   event_div.innerHTML= "Map pan to:</br> lat:" + pt.lat + "</br>lng:" + pt.lng + "</br>"+event_div.innerHTML;
                   map.panTo(pt);/*Pans the map to a given lat long */
                }
                function mapmyindia_set_center_and_zoom_level() {
                    var pt = new L.LatLng(30.7333, 76.7794);/*WGS location object*/
                    map.setView(pt, 8);/*function that modifies both center map position and zoom leveL.*/
                }
                function mapmyindia_move_to_center() {
                    var pt = new L.LatLng(30.7333, 76.7794);/*WGS location object*/
                    map.setView(pt);/* new map position to be in the middle of the HTML element where map is drawn.*/
                    var event_div = document.getElementById("event-log");
                    event_div.innerHTML='';
                    event_div.innerHTML= "Map pan to:</br> lat:" + pt.lat + "</br>lng:" + pt.lng + "</br>"+event_div.innerHTML;
                }
                function mapmyindia_zoom_in() {
                    if(map.getZoom()<19)
                    {
                    map.zoomIn();/*Zooms in one zoom step, unless current zoom level is the minimal zoom level. */
                    var zoom=map.getZoom();/*zoom must be number that is set as new zoom level between 4 and 19*/
                    zoom = zoom + 1;
                    var event_div = document.getElementById("event-log");
                    event_div.innerHTML='';
                    event_div.innerHTML= "Zoom level set to: "+ zoom +event_div.innerHTML;
                    }
                }
                function mapmyindia_zoom_out() {
                    if(map.getZoom()>4)
                    {
                    map.zoomOut();/*Zooms out one zoom step, unless current zoom level is the maximal zoom level. */
                    var zoom=map.getZoom();/*zoom must be number that is set as new zoom level between 4 and 19*/
                    zoom = zoom - 1;
                    var event_div = document.getElementById("event-log");
                    event_div.innerHTML='';
                    event_div.innerHTML= "Zoom level set to: "+ zoom +event_div.innerHTML;
                    }
                }
                function mapmyindia_set_zoom() {
                    var zoom=14;
                    map.setZoom(zoom);/*zoom must be number that is set as new zoom level between 4 and 19*/
                    var event_div = document.getElementById("event-log");
                    event_div.innerHTML='';
                    event_div.innerHTML= "Zoom level set to: "+ zoom +event_div.innerHTML;
                }
            </script>
            <div class="container" style="height:100%;, width:100%; display: table-row">
            <div id="result" style="display: table-cell;">
            <div style="padding: 16px 12px 6px 38px"><button onclick="mapmyindia_current_zoom_level()" style="width: 220px;">Get current zoom level</button></div>
                <div style="padding: 6px 12px 6px 38px;"><button onclick="mapmyindia_current_center_location()" style="width: 220px;">Get current map center</button></div>
                <div style="padding: 6px 12px 6px 38px;"><button onclick="mapmyindia_current_bound()" style="width: 220px;">Get current map bound</button></div>
                <div style="padding: 6px 12px 6px 38px;"><button onclick="mapmyindia_map_pan()" style="width: 220px;">Map pan</button></div>
                <div style="padding: 6px 12px 6px 38px;"><button onclick="mapmyindia_move_to_center()" style="width: 220px;">Move to center</button></div>
                <div style="padding: 6px 12px 6px 38px;"><button onclick="mapmyindia_set_zoom()" style="width: 220px;">Set zoom level</button></div>
                <div style="padding: 6px 12px 6px 38px;"><button onclick="mapmyindia_set_center_and_zoom_level()" style="width: 220px;">Set center and zoom level</button></div>
                <div style="padding: 6px 12px 6px 38px;"><button onclick="mapmyindia_zoom_in()" style="width: 220px;">Zoom in</button></div>
                <div style="padding: 6px 12px 6px 38px;"><button onclick="mapmyindia_zoom_out()" style="width: 220px;">Zoom out</button></div>
                <div style="padding:6px 12px 1px; border-bottom:1px solid #e9e9e9"><ul style=" line-height: 20px; font-size: 12px; color: #555">
                        <li>Click anywhere on the map</li>
                        <li>Double click anywhere on the map </li>
                        <li>Mouse up on the map anywhere </li>
                        <li>Mouse down on the map anywhere</li>
                        <li>Change the zoom level or pan the map</li>
                    </ul></div>
                <div style="padding:14px 12px 6px 38px;color: #666;">Event Logs</div>
                <div style="padding:6px 12px 6px 38px;color: #777; font-size: 12px; line-height: 22px;" id="event-log"></div>
            </div>
            <div id="map" style="display: table-cell;"></div>
            </div>





        <br>
        <footer class="page-footer" style="background-color: #000000">
          <div class="container">
            <div class="row">
              <div class="col l6 s12">
                <h5 class="white-text">Footer Content</h5>
                <p class="grey-text text-lighten-4">You can use rows and columns here to organize your footer content.</p>
              </div>
              <div class="col l4 offset-l2 s12">
                <h5 class="white-text">Links</h5>
                <ul>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 1</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 2</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 3</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 4</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            <div class="container">
            © 2014 Copyright Text
            <a class="grey-text text-lighten-4 right" href="#!">More Links</a>
            </div>
          </div>
        </footer>


    </body>
</html>
